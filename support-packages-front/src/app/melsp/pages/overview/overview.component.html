<div class="overview">
  <h1 class="overview__title">M&E Guidelines</h1>

  <div class="overview__importantList">
    <div class="overview__importantList--item">
      <div class="overview__importantList--circle" style="background-color: #c0504c">4</div>
      <p>Very Important |</p>
    </div>
    <div class="overview__importantList--item">
      <div class="overview__importantList--circle" style="background-color: #da9694">3</div>
      <p>Important |</p>
    </div>
    <div class="overview__importantList--item">
      <div class="overview__importantList--circle" style="background-color: #e6b8b7">2</div>
      <p>Useful |</p>
    </div>
    <div class="overview__importantList--item">
      <div class="overview__importantList--circle" style="background-color: #d6d6d6">1</div>
      <p>Optional</p>
    </div>
  </div>

  <p-table
    #dt2
    [loading]="loading"
    styleClass="p-datatable-sm overview__table p-datatable-gridlines"
    [value]="overviewTools"
    [tableStyle]="{ 'min-width': '50rem' }"
    [globalFilterFields]="['id', 'name', 'cate_name']">
    <ng-template pTemplate="caption">
      <div class="flex">
        <span class="p-input-icon-left ml-auto">
          <i class="pi pi-search"></i>
          <input
            pInputText
            type="text"
            style="padding: 0.5rem 0.5rem 0.5rem 2.5rem"
            (input)="dt2.filterGlobal($any($event.target).value, 'contains')"
            placeholder="Search Tool" />
          </span>
        </div>
      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th colspan="2" id="empty__space"></th>
          <th colspan="3" id="Designing" style="font-size: 12px">Designing</th>
          <th colspan="3" id="Implementation" style="font-size: 12px">Implementation</th>
          <th colspan="3" id="Closure_&_Beyond" style="font-size: 12px">Closure & Beyond</th>
        </tr>

        <tr>
          <th id="id" style="font-size: 12px">ID</th>
          <th id="Name" style="font-size: 12px">Guideline</th>
          <th id="PM" style="font-size: 12px">PM</th>
          <th id="PJM" style="font-size: 12px">PJM</th>
          <th id="M&EO" style="font-size: 12px">M&EO</th>
          <th id="PM" style="font-size: 12px">PM</th>
          <th id="PJM" style="font-size: 12px">PJM</th>
          <th id="M&EO" style="font-size: 12px">M&EO</th>
          <th id="PM" style="font-size: 12px">PM</th>
          <th id="PJM" style="font-size: 12px">PJM</th>
          <th id="RM&EO" style="font-size: 12px">RM&EO</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-item>
        <tr>
          <td>{{ item.id }}</td>
          <td>
            <div class="overview__table__item">
              <div class="overview__table__item--name">
                <i
                  [class]="getIconByType(item.type)"
                style="font-size: 1.2rem; min-width: 1rem; font-weight: 600"></i>
                {{ item.name }}
              </div>

              @if (item.source) {
                <a
                  [href]="item.source"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="overview__table__item--link">
                  <i
                    [class]="getIconByTypeDownload(item.type)"
                  style="font-size: 1.2rem; font-weight: 600"></i>
                </a>
              }
            </div>
          </td>

          @for (resource of item.resources; track resource) {
            <td [class]="getImportants(resource).styleColor">
              {{ getImportants(resource).importanceLevel }}
            </td>
          }
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="12">No data found.</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
